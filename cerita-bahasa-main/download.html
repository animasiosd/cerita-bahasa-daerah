<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Halaman Download</title>
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  <h1>Download Cerita</h1>
  <div>
    <label>Filter Bahasa: <input type="text" id="filter-bahasa" oninput="filterTable()"></label>
    <label>Urutan Cerita: <input type="text" id="filter-urutan" oninput="filterTable()"></label>
    <label>Judul Video: <input type="text" id="filter-judul" oninput="filterTable()"></label>
  </div>
  <table id="downloadTable" border="1">
    <thead>
      <tr>
        <th>Bahasa</th>
        <th>Urutan Cerita</th>
        <th>Judul Video</th>
        <th>Link Download</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    async function loadData() {
      const response = await fetch('https://sheet.best/api/sheets/abcd-1234-5678'); // ganti link ini
      const data = await response.json();
      const tbody = document.querySelector('#downloadTable tbody');
      tbody.innerHTML = '';
      data.forEach(item => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${item.Bahasa}</td><td>${item['Urutan Cerita']}</td><td>${item['Judul Video']}</td><td><a href="${item['Link Download']}" target="_blank">Download</a></td>`;
        tr.onclick = () => window.open(item['Link Download'], '_blank');
        tbody.appendChild(tr);
      });
    }

    function filterTable() {
      const b = document.getElementById('filter-bahasa').value.toLowerCase();
      const u = document.getElementById('filter-urutan').value.toLowerCase();
      const j = document.getElementById('filter-judul').value.toLowerCase();
      const rows = document.querySelectorAll('#downloadTable tbody tr');
      rows.forEach(row => {
        const [bahasa, urutan, judul] = row.children;
        row.style.display =
          bahasa.textContent.toLowerCase().includes(b) &&
          urutan.textContent.toLowerCase().includes(u) &&
          judul.textContent.toLowerCase().includes(j)
          ? ''
          : 'none';
      });
    }

    loadData();
  </script>
</body>
</html>
